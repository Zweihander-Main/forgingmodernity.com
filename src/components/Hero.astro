---
export interface Props {
	title: string;
	subtitle: string;
}

const { title, subtitle } = Astro.props;
---

<section>
	<div class="parallax">
		<div class="parallax__layer parallax__layer__0">
			<img
				src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_0.png?raw=true"
			/>
		</div>
		<div class="parallax__layer parallax__layer__1">
			<img
				src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_1.png?raw=true"
			/>
		</div>
		<div class="parallax__layer parallax__layer__2">
			<img
				src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_2.png?raw=true"
			/>
		</div>
		<div class="parallax__layer parallax__layer__3">
			<img
				src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_3.png?raw=true"
			/>
		</div>
		<div class="parallax__layer parallax__layer__4">
			<img
				src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_4.png?raw=true"
			/>
		</div>
		<div class="parallax__layer parallax__layer__5">
			<img
				src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_5.png?raw=true"
			/>
		</div>
		<div class="parallax__layer parallax__layer__6">
			<img
				src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_6.png?raw=true"
			/>
			<h1>{title}</h1>
			<h2>{subtitle}</h2>
			<h3><a href="./purchase">Buy now</a></h3>
		</div>
		<div class="parallax__cover"></div>
	</div>
</section>
<style lang="scss">
	@use 'sass:math';
	section {
		width: 100%;
		height: 100vh;
		background: #fff;
		text-align: center;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}
	h1 {
		font-size: 2rem;
	}
	h2 {
		font-size: 1.5rem;
	}
	h3 {
		font-size: 1rem;
	}
	.parallax {
		perspective: 100px;
		height: 100vh;
		overflow-x: hidden;
		overflow-y: auto;
		position: absolute;
		top: 0;
		left: 50%;
		right: 0;
		bottom: 0;
		transform: translateX(-50%);
		width: 100%;
	}

	.parallax__layer {
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;

		img {
			display: block;
			position: absolute;
			bottom: 0;
			width: 100vw;
		}
	}

	.parallax__cover {
		display: block;
		position: absolute;
		top: 100%;
		left: 0;
		right: 0;
		height: 100vh;
		z-index: 2;
	}

	$parallax__layers: 6;

	@for $i from 0 through $parallax__layers {
		$x: math.div($parallax__layers - $i, 2);
		.parallax__layer__#{$i} {
			transform: translateZ(#{-100 * $x}px) scale($x + 1);
		}
	}
</style>
